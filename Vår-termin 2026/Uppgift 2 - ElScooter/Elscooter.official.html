<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VHDeS.se Official</title>
</head>
<body>
    <h1>Hyr en ElScooter</h1>
    <h2>Välkommen, Tage!</h2>


    <p id="elscooterStatus" class="status">Ingen elscooter hyrd</p>
    <p id="kostnadText">Kostnad: 0 kr</p>

    <button id="hyrKnapp">Hyr elscooter</button>
    <button id="lamnaTillbakaKnapp">Lämna tillbaka</button>
    
    <div id="uthyrningsHistorik"></div>

    <script>
        const parametrar = new URLSearchParams(window.location.search);
        const anvandarnamn = parametrar.get("anvandarnamn");
        const hyrKnapp = document.getElementById("hyrKnapp");
        const lamnaTillbakaKnapp = document.getElementById("lamnaTillbakaKnapp");
        const elscooterStatus = document.getElementById("elscooterStatus");
        const uthyrningsHistorik = document.getElementById("uthyrningsHistorik");
        const kostnadText = document.getElementById("kostnadText");
        const prisPerMinut = 5;
        let kostnadsTimer = null;


        let uthyrningsStartTid = null;

        lamnaTillbakaKnapp.style.display = "none";

        hyrKnapp.addEventListener("click", function () {
            uthyrningsStartTid = new Date();

            elscooterStatus.textContent = "Elscooter är hyrd";
            elscooterStatus.classList.add("rented");

            hyrKnapp.disabled = true;
            lamnaTillbakaKnapp.style.display = "inline-block";

            // Uppdatera kostnad varje minut
            kostnadsTimer = setInterval(function () {
                const nu = new Date();
                const minuter = Math.ceil((nu - uthyrningsStartTid) / 60000);
                const kostnad = minuter * prisPerMinut;
                    kostnadText.innerText ="Kostnad just nu: " + kostnad + " kr";
                    }, 1000);
        });


        lamnaTillbakaKnapp.addEventListener("click", function () {
            const uthyrningsSlutTid = new Date();
            const minuter = Math.ceil(
                (uthyrningsSlutTid - uthyrningsStartTid) / 60000
                );
                const totalKostnad = minuter * prisPerMinut;

        uthyrningsHistorik.innerText ="Du hyrde elscootern i " + minuter +
        " minuter. Totalt pris: " + totalKostnad + " kr.";
            elscooterStatus.innerText = "Ingen elscooter hyrd";
            elscooterStatus.classList.remove("rented");

        hyrKnapp.disabled = false;
        lamnaTillbakaKnapp.style.display = "none";

        clearInterval(kostnadsTimer);
            kostnadText.innerText = "Kostnad: 0 kr";
        });
    </script>
</body>
</html>